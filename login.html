<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>تسجيل الدخول - لوحة الإدارة</title>
	<link rel="icon" type="image/svg+xml" href="./assets/images/logo_main.png" />

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
	<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

	<style>
		* {
			font-family: 'Cairo', sans-serif;
		}

		body {
			min-height: 100vh;
			display: flex;
			align-items: center;
			justify-content: center;
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			padding: 2rem 1rem;
		}

		.login-card {
			width: 100%;
			max-width: 420px;
			background: #fff;
			border-radius: 16px;
			box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
			overflow: hidden;
		}

		.login-header {
			padding: 2rem 2rem 1rem;
			text-align: center;
		}

		.login-header img {
			width: 90px;
			height: 90px;
			object-fit: contain;
		}

		.login-header h1 {
			font-size: 1.25rem;
			margin-top: 0.75rem;
			color: #1f2b7b;
			font-weight: 800;
		}

		.login-body {
			padding: 1rem 2rem 2rem;
		}

		.form-control {
			border-radius: 12px;
			padding: 0.8rem 1rem;
		}

		.btn-login {
			width: 100%;
			border-radius: 12px;
			padding: 0.9rem;
			font-weight: 700;
			background: #1f2b7b;
		}

		.btn-login:hover {
			background: #172060;
		}

		.error {
			color: #e74c3c;
			font-size: 0.9rem;
			margin-top: 0.5rem;
			display: none;
		}

		.hint {
			color: #888;
			font-size: 0.85rem;
			margin-top: 0.75rem;
			text-align: center;
		}
	</style>
</head>

<body>
	<div class="login-card">
		<div class="login-header">
			<img src="./assets/images/logo_main.png" alt="logo" />
			<h1>تسجيل الدخول للوحة الإدارة</h1>
		</div>
		<div class="login-body">
			<form id="loginForm">
				<div class="mb-3">
					<label class="form-label">اسم المستخدم</label>
					<input type="text" id="username" class="form-control" placeholder="أدخل اسم المستخدم" required />
				</div>
				<div class="mb-2">
					<label class="form-label">كلمة المرور</label>
					<input type="password" id="password" class="form-control" placeholder="أدخل كلمة المرور" required />
				</div>
				<div id="error" class="error"></div>
				<button type="submit" class="btn btn-primary btn-login mt-3">
					<i class="fas fa-sign-in-alt"></i>
					دخول
				</button>
				<div class="hint">
					للتجربة السريعة: admin / 12345
				</div>
			</form>
		</div>
	</div>

	<script>
		(function initLogin() {
			const form = document.getElementById('loginForm');
			const errorBox = document.getElementById('error');

			// Allow preset credentials; you can change them here
			const VALID_USER = 'admin@gmail.com';
			const VALID_PASS = 'password';

			// If already logged in, redirect to admin
			if (localStorage.getItem('admin_logged_in') === 'true') {
				location.replace('admin.html');
				return;
			}

			form.addEventListener('submit', function (e) {
				e.preventDefault();
				const user = document.getElementById('username').value.trim();
				const pass = document.getElementById('password').value;

				if (user === VALID_USER && pass === VALID_PASS) {
					localStorage.setItem('admin_logged_in', 'true');
					localStorage.setItem('admin_username', user);

					// Redirect back if return query exists
					const params = new URLSearchParams(location.search);
					const returnTo = params.get('return');
					const target = returnTo ? decodeURIComponent(returnTo) : 'admin.html';
					location.replace(target);
				} else {
					errorBox.textContent = 'بيانات الدخول غير صحيحة';
					errorBox.style.display = 'block';
				}
			});
		})();
	</script>

</body>

</html>